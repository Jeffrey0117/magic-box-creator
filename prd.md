# KeyBox PRD - 產品需求文件

## 專案狀態：V7.5 正式版（已上線）

## 📌 產品定位

**KeyBox 是一個「關鍵字解鎖 Email 收集工具」**

- ✅ 主要功能：透過關鍵字機制收集 Email 名單
- ✅ 適用場景：社群貼文、Threads、IG 限動、Newsletter
- ⚠️ **重要說明**：KeyBox 僅負責「Email 收集與管理」
  - 實體資料包（檔案、連結）需創作者自行上傳雲端（Google Drive / Dropbox）
  - KeyBox 提供「內容欄位」讓你填入雲端連結
  - 未來可能規劃整合雲端服務（需求驗證中）

---

## ✅ 已完成功能總覽

### V1-V3：核心功能 + RWD + 品牌重塑
- ✅ 登入註冊系統（Supabase Auth）
- ✅ 創建資料包（關鍵字 + 內容）
- ✅ 關鍵字解鎖機制
- ✅ 已登入用戶自動解鎖
- ✅ 我的領取記錄功能
- ✅ RWD 全裝置支援
- ✅ KeyBox 綠色品牌主題

### V4：數據管理與分析
- ✅ CSV 匯出功能（Email 名單）
- ✅ OG Meta Tags（社群分享優化）
- ✅ Google Analytics 4 整合

### V5：短網址系統
- ✅ NanoID 短碼生成（6 字元）
- ✅ 短網址路由支援（`/:shortCode`）
- ✅ 向後兼容舊 UUID 連結

### V6：註冊登入體驗優化
- ✅ 驗證信中文化
- ✅ Tab 切換式 UI（登入/註冊）
- ✅ 驗證連結修正（Production 環境）
- ✅ 註冊提示優化

### V7：UX 最終優化
- ✅ 分享文案範本功能
- ✅ 錯誤訊息全面中文化
- ✅ Loading 狀態優化
- ✅ 隱私權政策頁面
- ✅ 使用說明頁面

### V7.1：管理面板優化（2025-10-02）
- ✅ 移除混亂的「回到 Box 頁面」按鈕
- ✅ 新增「使用說明」和「隱私權政策」快速入口
- ✅ 優化底部區塊文案與佈局

### V7.2：限額功能（2025-10-02）
- ✅ 新增 quota 欄位至 keywords 資料表
- ✅ 剩餘數量顯示功能

### V7.5：首頁重新設計（2025-10-02）
- ✅ 品牌介紹式首頁設計
- ✅ 使用者/創作者雙動線教學
- ✅ 適合場景展示
- ✅ 移除 Lovable SEO 痕跡
- ✅ 首頁自動導向登入頁邏輯修正

---

## 📋 待處理項目清單

### 🔥 最高優先級（用戶痛點）

#### 0. 領取記錄管理優化 ⭐⭐⭐⭐⭐
**現況問題**：
1. **顯示不清楚**：領取記錄藏在「查看記錄」按鈕後，需要逐一展開才能看到
2. **無法編輯**：測試記錄無法刪除，導致數據混亂
3. **缺乏統計**：無法快速看到總領取數、今日新增等關鍵數據

**用戶痛點**：
- 創作者測試時產生的假記錄無法清除
- 需要點開每個關鍵字才能看到領取數量
- 無法一眼看出哪個關鍵字最受歡迎

**改進方案**：

##### A. 改善資訊顯示（必做）⭐⭐⭐⭐⭐
**目標**：讓統計數字一目了然

```tsx
// 在每個關鍵字卡片上直接顯示統計
<div className="flex gap-4 text-sm text-muted-foreground">
  <span>📊 總領取：{totalCount} 人</span>
  <span>📈 今日：+{todayCount}</span>
  {item.quota && (
    <span>🔥 剩餘：{item.quota - totalCount} 份</span>
  )}
</div>
```

**實作細節**：
- 在 `fetchKeywords` 時同時載入每個關鍵字的領取數
- 使用 Supabase 的 `count` 功能統計
- 計算今日領取數（過濾 `unlocked_at >= today`）

**時間估計**：30-40 分鐘
**技術難度**：低

---

##### B. 單筆記錄刪除功能（必做）⭐⭐⭐⭐⭐
**目標**：清除測試記錄，保持數據乾淨

**UI 設計**：
```tsx
// 在領取記錄列表中加入刪除按鈕
<div className="flex justify-between items-center">
  <span>{log.email}</span>
  <Button
    size="sm"
    variant="ghost"
    onClick={() => handleDeleteLog(log.id)}
  >
    <Trash2 className="w-3 h-3" />
  </Button>
</div>
```

**功能流程**：
1. 點擊刪除按鈕
2. 彈出確認對話框：「確定要刪除 {email} 的領取記錄嗎？」
3. 確認後從 `email_logs` 表刪除該筆記錄
4. 同步更新顯示的統計數字

**安全性考量**：
- ✅ RLS 政策確保只能刪除自己關鍵字下的記錄
- ✅ 二次確認避免誤刪
- ✅ 刪除後自動重新計算統計數字

**時間估計**：20-30 分鐘
**技術難度**：低

---

##### C. 批次刪除功能（選做）⭐⭐⭐
**目標**：一次清空所有測試記錄

**使用場景**：
- 創作者測試完畢，想清空所有測試數據
- 重新開始收集正式名單

**UI 設計**：
```tsx
<Button
  variant="outline"
  onClick={() => handleBatchDelete(keywordId)}
>
  🗑️ 清空所有記錄
</Button>
```

**功能流程**：
1. 點擊「清空所有記錄」
2. 彈出警告對話框：
   ```
   ⚠️ 警告：此操作將永久刪除所有 {count} 筆領取記錄
   確定要繼續嗎？
   ```
3. 要求輸入「DELETE」確認
4. 刪除該關鍵字下所有 email_logs

**時間估計**：30 分鐘
**技術難度**：中

---

##### D. 記錄篩選與搜尋（進階）⭐⭐
**目標**：快速找到特定 Email

**功能**：
- 搜尋框：輸入 Email 模糊搜尋
- 日期篩選：只看今日/本週/本月
- 排序：按時間、Email 字母排序

**時間估計**：1 小時
**技術難度**：中

---

**建議實作順序**：
1. **第一階段（本週）**：A + B（改善顯示 + 單筆刪除）
2. **第二階段（下週）**：C（批次刪除）
3. **第三階段（需求驗證後）**：D（進階篩選）

**預期效益**：
- ✅ 解決測試記錄混亂問題
- ✅ 提升創作者數據掌握感
- ✅ 減少 60% 的「查看記錄」點擊次數
- ✅ 符合 GDPR「資料刪除權」要求

---

### 🎯 高優先級（建議近期完成）

#### 1. 購買自訂網域 ⭐⭐⭐⭐
**現況**：使用 Vercel 預設網址（`xxx.vercel.app`）

**建議行動**：
- 購買簡短網域（例如：`keyb.ox`, `keyb.app`）
- 成本：$10-30/年
- 時間：30 分鐘（購買 + DNS 設定）
- 效益：提升品牌專業度 70%

---

### 🚀 中優先級（PMF 驗證後）

#### 2. PWA 支援 ⭐⭐⭐
**效益**：
- 可「安裝」到手機桌面
- 離線查看已領取的資料包
- 推播通知（新資料包上架）

**時間**：1-2 小時  
**成本**：0 元

---

#### 3. 自訂 Logo 設計 ⭐⭐
**現況**：使用 emoji 🔑

**選項**：
- A. 使用 Icon Library（30 分鐘）
- B. 委外設計（$50-200）
- C. 保持 emoji（簡約路線）

**建議**：驗證 PMF 後再做

---

#### 4. 雲端整合功能 ⭐⭐
**現況**：創作者需自行上傳檔案至 Google Drive / Dropbox

**未來規劃**：
- 整合 Google Drive API（一鍵授權存取）
- 整合 Dropbox / OneDrive
- 自動生成分享連結

**時間**：2-3 天（需 OAuth 整合）
**優先級**：待 PMF 驗證後決定

**暫時方案**：
在使用說明明確告知創作者：
> 「KeyBox 不提供檔案儲存空間，請將資料包上傳至 Google Drive 並貼上分享連結」

---

### 📋 低優先級（長期規劃）

#### 5. Email 行銷整合
- 與 Mailchimp / ConvertKit 整合
- 自動同步領取名單

#### 6. Webhook 支援
- 領取事件通知
- 整合 Zapier / Make

#### 7. 團隊協作功能
- 多人管理同一組資料包
- 權限管理

---

## 🎯 決策建議：下一步該做什麼？

### 立即執行（本週）：
1. ✅ V7.5 首頁重設計（已完成）
2. **🔥 領取記錄管理優化（最高優先）**
   - 統計數字顯示
   - 單筆記錄刪除功能

### 近期規劃（1-2 週內）：
1. 領取記錄批次刪除功能
2. 購買自訂網域（提升品牌感）
3. 根據用戶反饋決定其他功能

### PMF 驗證後（1 個月後）：
- 根據用戶使用數據評估雲端整合需求
- 評估 PWA 需求
- 規劃進階數據分析功能

---

## 📝 版本變更記錄

### V8（規劃中）
- 🎯 領取記錄統計數字顯示
- 🗑️ 單筆記錄刪除功能
- 🧹 批次清空記錄功能（選做）

### V7.5（2025-10-02）
- 🎨 首頁重新設計（品牌介紹 + 雙動線教學）
- 🔢 限額功能（quota）
- ✅ 首頁重定向邏輯修正

### V7.1（2025-10-02）
- 🔧 移除管理面板「回到 Box 頁面」按鈕
- ✅ 新增「使用說明」和「隱私權政策」快速入口
- 🎨 優化底部區塊佈局與文案

### V7（2025-10-01）
- 📋 分享文案範本功能
- 🌏 錯誤訊息中文化
- ⏳ Loading 狀態優化
- 📄 隱私權政策頁面
- 📖 使用說明頁面

### V6（2025-09-30）
- 🌍 驗證信中文化
- 🎨 Tab 切換式登入/註冊 UI
- 🔗 驗證連結修正

### V5（2025-09-29）
- 🔗 短網址系統（NanoID）
- 🚀 URL 優化（6 字元短碼）

### V4（2025-09-28）
- 📊 CSV 匯出功能
- 🔗 OG Meta Tags
- 📈 Google Analytics 4

### V1-V3（2025-09-27）
- 🏗️ 核心功能開發
- 📱 RWD 支援
- 🎨 KeyBox 品牌重塑

---

**文件最後更新**：2025-10-02
**目前版本**：V7.5
**下一版本規劃**：V8（領取記錄管理優化）
**專案狀態**：✅ 已上線，持續優化中

---
